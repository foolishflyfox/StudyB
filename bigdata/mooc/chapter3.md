# 分布式文件系统 HDFS

大数据时代必须解决海量数据的高效存储问题。为此，谷歌公司开发了分布式文件系统，通过网络实现文件在多台机器上的分布式存储。较好地满足了大规模数据存储的需求。

## 分布式文件系统

相对于传统的本地文件系统而言，分布式文件系统(Distributed File System)是一种通过网络实现文件在多台主机上进行分布式存储的文件系统。分布式文件系统的设计一般采用 “客户机/服务器”(Client-Server)模式，客户端以特定的通信协议通过网络与服务器建立连接，提出文件访问请求，客户端和服务器可以通过设置访问权来限制请求方对底层数据存储块的访问。目前已经得到广泛应用的分布式文件系统主要包括 GFS 和 HDFS，后者是针对前者的开源实现。

### 分布式文件系统的结构

在我们所熟悉的 Windows、Linux 等操作系统中，文件系统一般会把磁盘空间划分为每 512Byte 一组，称为磁盘块，它是文件系统进行操作操作的最小单位，文件系统的块(Block)通常是磁盘块的整数倍，即每次读写的数据量必须是磁盘块大小的整数倍。

与普通文件系统类似，分布式文件系统也采用了块的概念，文件被分成若干个块进行存储，块是数据读写的基本单元，只不过分布式文件系统的块要比操作系统的块大很多。比如 HDFS 默认一个块的大小是 64MB。与普通文件不同的是，在分布式文件系统中，如果一个文件小于一个块的大小，它并不占用整个数据块的存储空间。

分布式文件系统在物理结构上是由计算机集群中的多个节点构成的。这些节点范围两类：一类叫“主节点”(Master Node)，或者被称为“名称节点”(NameNode)；另一类叫“从节点”(Slave Node)，或者被称为数据节点(Data Node)。名称节点负责文件和目录的创建、删除和重命名等，同时管理着数据节点和文件块的映射关系，因此客户端只要访问名称节点才能找到请求的文件块所在的位置，进而到相应位置读取所需文件块。数据节点负责数据的存储和读取，在存储时，客户端从名称节点分配存储位置，然后由客户端将数据直接写入相应的数据节点；在读取时，客户端从名称节点获得数据节点和文件块的映射关系，然后就可以到相应位置访问文件块。数据节点也要根据名称节点的命令创建、删除和分支数据库。

计算机集群中的节点可能发生故障，因此，为了保证数据的完整性，分布式文件系统通常采用多副本存储。

### HDFS 简介
